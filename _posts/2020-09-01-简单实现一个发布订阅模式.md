---
title: 简单实现一个发布订阅模式
tags:
  - 发布订阅
  - 设计模式
---

今天小朋友们开始上学了，大朋友要一直保持在学习状态哦 O.o ，今天补习一下发布订阅模式，

<!-- more -->

创建一个事件中心 eventBus，有 events 属性，on，emit，off 方法;

eventBus 是一个对象

```javascript
 let eventBus = {
  events:new Map(),
  emit:function(event,data){
	let eventSet = this.events.get(event)	
  if(eventSet){
    eventSet.forEach((effect)=>{effect(data)})
  }
  },
  on:function(event,fn){
    let eventSet = this.events.get(event)
    if(!eventSet){ this.events.set(event, (eventSet = new Set()))}
    eventSet.add(fn)
  },
  off:function(event){
  let result =  this.events.delete(event)
  if(result){
    console.log('删除成功')
    }else{
     console.log('删除失败')
    }
  },
}
```

